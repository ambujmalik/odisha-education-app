// Global Variables
let currentRole = null;
let selectedRole = null;

// DOM Elements
const loadingScreen = document.getElementById('loadingScreen');
const loginPage = document.getElementById('loginPage');
const dashboardPage = document.getElementById('dashboardPage');
const loginForm = document.getElementById('loginForm');
const statsGrid = document.getElementById('statsGrid');
const quickActions = document.getElementById('quickActions');
const servicesGrid = document.getElementById('servicesGrid');
const dashboardTitle = document.getElementById('dashboardTitle');
const dashboardSubtitle = document.getElementById('dashboardSubtitle');
const dashboardOdiaText = document.getElementById('dashboardOdiaText');
const roleBadge = document.getElementById('roleBadge');
const userName = document.getElementById('userName');
const userRole = document.getElementById('userRole');
const userId = document.getElementById('userId');
const userAvatar = document.getElementById('userAvatar');
const modalOverlay = document.getElementById('modalOverlay');
const modalTitle = document.getElementById('modalTitle');
const modalTitleOdia = document.getElementById('modalTitleOdia');
const modalBody = document.getElementById('modalBody');

// Enhanced Sample Data for all roles
const roleConfigs = {
    student: {
        name: 'рм░рммрм┐ рмХрнБрморм╛рм░ рмкрмЯрнЗрм▓',
        nameEng: 'Ravi Kumar Patel',
        title: 'Student Dashboard',
        titleOdia: 'рмЫрм╛рмдрнНрм░ рмбрнНрнЯрм╛рм╕рммрнЛрм░рнНрмб',
        subtitle: 'Class 10-A, Roll: 15, Kalinga Institute of Technology',
        userID: 'STU2024001',
        roleBadge: 'Active Student',
        credentials: { email: 'student@example.com', password: 'student123' },
        stats: [
            { icon: 'ЁЯУЪ', label: 'Current Grade', value: 'A-', change: '+5%', type: 'positive' },
            { icon: 'тЬЕ', label: 'Attendance', value: '92%', change: '+3%', type: 'positive' },
            { icon: 'ЁЯУЭ', label: 'Assignments', value: '8/10', change: '+2', type: 'positive' },
            { icon: 'ЁЯПЖ', label: 'Class Rank', value: '5th', change: '+2', type: 'positive' }
        ],
        quickActions: [
            { icon: 'ЁЯУЦ', text: 'View Assignments', textOdia: 'рмХрм╛рм░рнНрмпрнНрнЯ рмжрнЗрмЦрмирнНрмдрнБ', action: 'viewAssignments' },
            { icon: 'ЁЯУК', text: 'Check Results', textOdia: 'рмлрм│рм╛рмлрм│ рмжрнЗрмЦрмирнНрмдрнБ', action: 'checkResults' },
            { icon: 'ЁЯУЕ', text: 'Time Table', textOdia: 'рм╕рморнЯ рм╕рм╛рм░рмгрнА', action: 'viewTimetable' },
            { icon: 'ЁЯТм', text: 'Ask Teacher', textOdia: 'рм╢рм┐рмХрнНрм╖рмХрмЩрнНрмХрнБ рмкрмЪрм╛рм░рмирнНрмдрнБ', action: 'askTeacher' },
            { icon: 'ЁЯУЪ', text: 'Study Materials', textOdia: 'рмЕрмзрнНрнЯрнЯрми рм╕рм╛рмормЧрнНрм░рнА', action: 'studyMaterials' },
            { icon: 'ЁЯОп', text: 'Mock Tests', textOdia: 'рмормХ рмкрм░рнАрмХрнНрм╖рм╛', action: 'mockTests' }
        ],
        services: [
            { icon: 'ЁЯУЪ', title: 'Digital Library', titleOdia: 'рмбрм┐рмЬрм┐рмЯрм╛рм▓ рм▓рм╛рмЗрммрнНрм░рнЗрм░рнА', description: 'Access 10,000+ books and study materials in Odia and English' },
            { icon: 'ЁЯОп', title: 'Mock Tests', titleOdia: 'рмормХ рмкрм░рнАрмХрнНрм╖рм╛', description: 'Practice tests for Class 10 board exam preparation' },
            { icon: 'ЁЯПЖ', title: 'Achievement Tracker', titleOdia: 'рм╕рмлрм│рмдрм╛ рмЯрнНрм░рм╛рмХрм░', description: 'Track your academic progress and awards' }
        ]
    },
    parent: {
        name: 'рм░рморнЗрм╢ рмХрнБрморм╛рм░ рмкрмЯрнЗрм▓',
        nameEng: 'Ramesh Kumar Patel',
        title: 'Parent Portal',
        titleOdia: 'рмкрм┐рмдрм╛рморм╛рмдрм╛ рмкрнЛрм░рнНрмЯрм╛рм▓',
        subtitle: 'Monitoring child: Ravi Kumar Patel (Class 10-A)',
        userID: 'PAR2024050',
        roleBadge: 'Active Parent',
        credentials: { email: 'parent@example.com', password: 'parent123' },
        stats: [
            { icon: 'ЁЯзТ', label: 'Child Enrollment', value: '1', change: 'Ravi K. P.', type: 'neutral' },
            { icon: 'ЁЯУЬ', label: 'Avg. Grade', value: 'B+', change: '+2%', type: 'positive' },
            { icon: 'тЪая╕П', label: 'Pending Fees', value: 'тВ╣5,000', change: 'Due: 15 Oct', type: 'negative' },
            { icon: 'ЁЯУЕ', label: 'Next PTM', value: '20 Oct', change: '8:00 AM', type: 'info' }
        ],
        quickActions: [
            { icon: 'ЁЯТ╕', text: 'Pay Fees', textOdia: 'рмлрм┐рм╕рнН рмкрнИрма рмХрм░рмирнНрмдрнБ', action: 'payFees' },
            { icon: 'ЁЯУЮ', text: 'Contact Teacher', textOdia: 'рм╢рм┐рмХрнНрм╖рмХрмЩрнНрмХрнБ рмпрнЛрмЧрм╛рмпрнЛрмЧ', action: 'contactTeacher' },
            { icon: 'ЁЯУЕ', text: 'View Calendar', textOdia: 'рмХрнНрнЯрм╛рм▓рнЗрмгрнНрмбрм░ рмжрнЗрмЦрмирнНрмдрнБ', action: 'viewCalendar' },
            { icon: 'ЁЯУИ', text: 'Child Progress', textOdia: 'рм╕рмирнНрмдрм╛рми рмкрнНрм░рмЧрмдрм┐', action: 'childProgress' }
        ],
        services: [
            { icon: 'ЁЯЫбя╕П', title: 'Safety Monitoring', titleOdia: 'рмирм┐рм░рм╛рмкрмдрнНрмдрм╛ рмдрмжрм╛рм░рмЦ', description: 'Track bus location and school entry/exit' },
            { icon: 'ЁЯУ░', title: 'School Notices', titleOdia: 'рммрм┐рмжрнНрнЯрм╛рм│рнЯ рм╕рнВрмЪрмирм╛', description: 'Get immediate notifications on circulars and events' },
            { icon: 'ЁЯУК', title: 'Child Performance Report', titleOdia: 'рм╕рмирнНрмдрм╛рми рмХрм╛рм░рнНрмпрнНрнЯрмжрмХрнНрм╖рмдрм╛ рм░рм┐рмкрнЛрм░рнНрмЯ', description: 'Detailed analytics on your child\'s academic performance' }
        ]
    },
    teacher: {
        name: 'рм╕рнБрм╢рнНрм░рнА рмЕрмЮрнНрмЬрм│рм┐ рмжрм╛рм╕',
        nameEng: 'Susri Anjali Das',
        title: 'TeacherтАЩs Dashboard',
        titleOdia: 'рм╢рм┐рмХрнНрм╖рмХ рмбрнНрнЯрм╛рм╕рммрнЛрм░рнНрмб',
        subtitle: 'Class Teacher: 10-A, Subject: Mathematics',
        userID: 'TCH2019012',
        roleBadge: 'Active Teacher',
        credentials: { email: 'teacher@example.com', password: 'teacher123' },
        stats: [
            { icon: 'ЁЯСитАНЁЯОУ', label: 'Total Students', value: '45', change: 'Class 10-A', type: 'neutral' },
            { icon: ' absen', label: 'Avg. Attendance', value: '95%', change: 'Low Absenteeism', type: 'positive' },
            { icon: 'ЁЯУЭ', label: 'Pending Grading', value: '15', change: 'Math Test', type: 'negative' },
            { icon: 'ЁЯУЕ', label: 'Next Lesson', value: 'Trigonometry', change: '4:00 PM', type: 'info' }
        ],
        quickActions: [
            { icon: 'тЬЕ', text: 'Mark Attendance', textOdia: 'рмЙрмкрм╕рнНрмерм╛рми рмжрм┐рмЕрмирнНрмдрнБ', action: 'markAttendance' },
            { icon: 'ЁЯУЭ', text: 'Submit Grades', textOdia: 'рморм╛рм░рнНрмХ рмжрм┐рмЕрмирнНрмдрнБ', action: 'submitGrades' },
            { icon: 'ЁЯУг', text: 'Send Circular', textOdia: 'рм╕рм░рнНрмХрнБрм▓рм╛рм░ рмкрмарм╛рмирнНрмдрнБ', action: 'sendCircular' },
            { icon: 'ЁЯУЬ', text: 'Syllabus Tracker', textOdia: 'рмкрм╛рмарнНрнЯрмХрнНрм░рмо рмЯрнНрм░рм╛рмХрм░', action: 'syllabusTracker' }
        ],
        services: [
            { icon: 'ЁЯСе', title: 'Student Roster Management', titleOdia: 'рмЫрм╛рмдрнНрм░ рмдрм╛рм▓рм┐рмХрм╛ рмкрм░рм┐рмЪрм╛рм│рмирм╛', description: 'Manage student details, enrollment, and transfers' },
            { icon: 'ЁЯЦея╕П', title: 'e-Content Development', titleOdia: 'рмЗ-рммрм┐рм╖рнЯрммрм╕рнНрмдрнБ рммрм┐рмХрм╛рм╢', description: 'Upload and manage digital lesson plans and videos' },
            { icon: 'ЁЯУЮ', title: 'Parent Communication', titleOdia: 'рмЕрмнрм┐рмнрм╛рммрмХ рмпрнЛрмЧрм╛рмпрнЛрмЧ', description: 'Direct messaging platform for parents and students' }
        ]
    },
    headmaster: {
        name: 'рмбрмГ. рммрм┐рмЬрнЯ рморм╣рм╛рмирнНрмдрм┐',
        nameEng: 'Dr. Bijay Mohanty',
        title: 'Headmaster Portal',
        titleOdia: 'рмкрнНрм░рмзрм╛рми рм╢рм┐рмХрнНрм╖рмХ рмкрнЛрм░рнНрмЯрм╛рм▓',
        subtitle: 'Kalinga Institute of Technology, Bhubaneswar',
        userID: 'HM1998005',
        roleBadge: 'School Administrator',
        credentials: { email: 'headmaster@example.com', password: 'head123' },
        stats: [
            { icon: 'ЁЯПл', label: 'Total Staff', value: '45', change: '+2 since last yr', type: 'positive' },
            { icon: 'ЁЯзСтАНЁЯдЭтАНЁЯзС', label: 'Total Students', value: '1200', change: '+50 this year', type: 'positive' },
            { icon: 'ЁЯТ░', label: 'Budget Utilized', value: '85%', change: 'On Track', type: 'positive' },
            { icon: 'ЁЯЫая╕П', label: 'Maintenance Issues', value: '3', change: 'High Priority', type: 'negative' }
        ],
        quickActions: [
            { icon: 'ЁЯУЭ', text: 'Approve Leave', textOdia: 'рмЫрнБрмЯрм┐ рмЕрмирнБрморнЛрмжрми', action: 'approveLeave' },
            { icon: 'ЁЯУК', text: 'School Report Card', textOdia: 'рммрм┐рмжрнНрнЯрм╛рм│рнЯ рм░рм┐рмкрнЛрм░рнНрмЯ', action: 'schoolReport' },
            { icon: 'ЁЯПв', text: 'Staff Management', textOdia: 'рмХрм░рнНрмормЪрм╛рм░рнА рмкрм░рм┐рмЪрм╛рм│рмирм╛', action: 'staffManagement' },
            { icon: 'ЁЯТ╕', text: 'Budget Review', textOdia: 'рммрмЬрнЗрмЯрнН рм╕рморнАрмХрнНрм╖рм╛', action: 'budgetReview' }
        ],
        services: [
            { icon: 'ЁЯУЬ', title: 'School Accreditation', titleOdia: 'рммрм┐рмжрнНрнЯрм╛рм│рнЯ рморм╛рмирнНрнЯрмдрм╛', description: 'Tools for annual inspection and accreditation submission' },
            { icon: 'ЁЯТ░', title: 'Financial Management', titleOdia: 'рмЖрм░рнНрмерм┐рмХ рмкрм░рм┐рмЪрм╛рм│рмирм╛', description: 'Handle school budget, grants, and expenditure reports' },
            { icon: 'ЁЯЫбя╕П', title: 'Infrastructure Audit', titleOdia: 'рмЕрммрмХрм╛рмарм┐ рмЕрмбрм┐рмЯ', description: 'Schedule and manage facility maintenance and audits' }
        ]
    },
    block_officer: {
        name: 'рмЗрмВ. рм╕рнБрмирнАрм▓ рм╕рм╛рм╣рнБ',
        nameEng: 'Eng. Sunil Sahoo',
        title: 'Block Education Officer Portal',
        titleOdia: 'рммрнНрм▓рмХ рм╢рм┐рмХрнНрм╖рм╛ рмЕрмзрм┐рмХрм╛рм░рнА рмкрнЛрм░рнНрмЯрм╛рм▓',
        subtitle: 'BEO, Bhubaneswar Block I',
        userID: 'BEO2022010',
        roleBadge: 'Block Officer',
        credentials: { email: 'beo@odgov.in', password: 'block123' },
        stats: [
            { icon: 'ЁЯПл', label: 'Total Schools', value: '150', change: '50 Primary, 100 Sec.', type: 'neutral' },
            { icon: 'тЬЕ', label: 'Report Compliance', value: '95%', change: '+5% last qtr', type: 'positive' },
            { icon: 'тЪая╕П', label: 'Pending Inspections', value: '12', change: 'Overdue: 2', type: 'negative' },
            { icon: 'ЁЯСе', label: 'Student Count', value: '50,000', change: '+1200 this yr', type: 'positive' }
        ],
        quickActions: [
            { icon: 'ЁЯУЬ', text: 'Generate Block Report', textOdia: 'рммрнНрм▓рмХ рм░рм┐рмкрнЛрм░рнНрмЯ рмкрнНрм░рм╕рнНрмдрнБрмд', action: 'generateBlockReport' },
            { icon: 'ЁЯУЭ', text: 'Schedule Inspection', textOdia: 'рмкрм░рнАрмХрнНрм╖рм╛ рм╕рнВрмЪрнА', action: 'scheduleInspection' },
            { icon: 'ЁЯУг', text: 'Issue Block Circular', textOdia: 'рммрнНрм▓рмХ рм╕рм░рнНрмХрнБрм▓рм╛рм░', action: 'issueBlockCircular' },
            { icon: 'ЁЯТ░', text: 'Fund Disbursement', textOdia: 'рмкрм╛рмгрнНрмарм┐ рммрмгрнНрмЯрми', action: 'fundDisbursement' }
        ],
        services: [
            { icon: 'ЁЯУЛ', title: 'School Audit Management', titleOdia: 'рммрм┐рмжрнНрнЯрм╛рм│рнЯ рмЕрмбрм┐рмЯрнН рмкрм░рм┐рмЪрм╛рм│рмирм╛', description: 'Monitor and approve school audit reports within the block' },
            { icon: 'ЁЯУК', title: 'Data Aggregation', titleOdia: 'рмбрм╛рмЯрм╛ рм╕рмВрмЧрнНрм░рм╣', description: 'Consolidate student and teacher data across all block schools' },
            { icon: 'ЁЯЧ║я╕П', title: 'Geo-Tagging Schools', titleOdia: 'рммрм┐рмжрнНрнЯрм╛рм│рнЯ рмЬрм┐рмУ-рмЯрнНрнЯрм╛рмЧрм┐рмВ', description: 'Verify and update the geographical location of all schools' }
        ]
    },
    district_officer: {
        name: 'рмЖрмЗ.рмП.рмПрм╕рнН рм╢рнНрм░рнАрмормдрнА рмжрнЗрммрнА рмкрнНрм░рм╕рм╛рмж',
        nameEng: 'IAS Smt. Devi Prasad',
        title: 'District Education Officer Portal',
        titleOdia: 'рмЬрм┐рм▓рнНрм▓рм╛ рм╢рм┐рмХрнНрм╖рм╛ рмЕрмзрм┐рмХрм╛рм░рнА рмкрнЛрм░рнНрмЯрм╛рм▓',
        subtitle: 'DEO, Khordha District',
        userID: 'DEO2018001',
        roleBadge: 'District Authority',
        credentials: { email: 'deo@odgov.in', password: 'district123' },
        stats: [
            { icon: 'ЁЯПв', label: 'Total Blocks', value: '10', change: '2,000 Schools Total', type: 'neutral' },
            { icon: 'ЁЯУЬ', label: 'Literacy Rate', value: '85%', change: '+3% last yr', type: 'positive' },
            { icon: 'тЪая╕П', label: 'Vacancies (Teacher)', value: '150', change: 'High Priority', type: 'negative' },
            { icon: 'ЁЯЫая╕П', label: 'Pending Schemes', value: '5', change: 'Mid-Day Meal', type: 'negative' }
        ],
        quickActions: [
            { icon: 'ЁЯУЭ', text: 'Approve Teacher Transfer', textOdia: 'рм╢рм┐рмХрнНрм╖рмХ рм╕рнНрмерм╛рмирм╛рмирнНрмдрм░ рмЕрмирнБрморнЛрмжрми', action: 'approveTransfer' },
            { icon: 'ЁЯУЬ', text: 'District Policy Update', textOdia: 'рмЬрм┐рм▓рнНрм▓рм╛ рмирнАрмдрм┐ рмЕрмкрмбрнЗрмЯрнН', action: 'policyUpdate' },
            { icon: 'ЁЯТ░', text: 'Review District Budget', textOdia: 'рмЬрм┐рм▓рнНрм▓рм╛ рммрмЬрнЗрмЯрнН рм╕рморнАрмХрнНрм╖рм╛', action: 'reviewBudget' },
            { icon: 'ЁЯУг', text: 'Issue State Report', textOdia: 'рм░рм╛рмЬрнНрнЯ рм░рм┐рмкрнЛрм░рнНрмЯ рмкрнНрм░рмжрм╛рми', action: 'issueStateReport' }
        ],
        services: [
            { icon: 'тЪЩя╕П', title: 'System Administration', titleOdia: 'рм╕рм┐рм╖рнНрмЯрмо рмкрнНрм░рм╢рм╛рм╕рми', description: 'User management, role assignment, and access control for the district' },
            { icon: 'ЁЯМР', title: 'Inter-Block Coordination', titleOdia: 'рмЖрмирнНрмдрмГ-рммрнНрм▓рмХ рм╕рмормирнНрн▒рнЯ', description: 'Coordinate resources, teachers, and schemes between blocks' },
            { icon: 'ЁЯЫая╕П', title: 'Scheme Monitoring', titleOdia: 'рмпрнЛрмЬрмирм╛ рмдрмжрм╛рм░рмЦ', description: 'Track the implementation and progress of state and central schemes' }
        ]
    },
    divisional_officer: {
        name: 'рм╢рнНрм░рнА. рмкрнНрм░рммрнЛрмз рмХрнБрморм╛рм░',
        nameEng: 'Sri. Prabodh Kumar',
        title: 'Divisional Commissioner Portal',
        titleOdia: 'рммрм┐рмнрм╛рмЧрнАрнЯ рмХрморм┐рм╢рмирм░ рмкрнЛрм░рнНрмЯрм╛рм▓',
        subtitle: 'Central Division, Odisha',
        userID: 'DIVC1995001',
        roleBadge: 'Division Head',
        credentials: { email: 'commissioner@odgov.in', password: 'division123' },
        stats: [
            { icon: 'ЁЯПЫя╕П', label: 'Total Districts', value: '10', change: '100 Blocks Total', type: 'neutral' },
            { icon: 'ЁЯПЖ', label: 'Avg. Pass Rate', value: '92%', change: '+1% last yr', type: 'positive' },
            { icon: 'ЁЯЪи', label: 'Critical Issues', value: '2', change: 'Cyclone preparedness', type: 'negative' },
            { icon: 'ЁЯУЬ', label: 'Policy Implementation', value: '90%', change: 'Excellent', type: 'positive' }
        ],
        quickActions: [
            { icon: 'ЁЯЪи', text: 'Review Disaster Plan', textOdia: 'рммрм┐рмкрм░рнНрмпрнНрнЯрнЯ рмпрнЛрмЬрмирм╛ рм╕рморнАрмХрнНрм╖рм╛', action: 'reviewDisaster' },
            { icon: 'ЁЯУЭ', text: 'Set Policy Directives', textOdia: 'рмирнАрмдрм┐ рмирм┐рм░рнНрмжрнНрмжрнЗрм╢рм╛рммрм│рнА рм╕рнНрмерм┐рм░', action: 'setDirectives' },
            { icon: 'ЁЯУК', text: 'View Divisional Metrics', textOdia: 'рммрм┐рмнрм╛рмЧрнАрнЯ рморнЗрмЯрнНрм░рм┐рмХрнНрм╕', action: 'viewMetrics' },
            { icon: 'ЁЯТ░', text: 'Allocate Emergency Funds', textOdia: 'рмЬрм░рнБрм░рнАрмХрм╛рм│рнАрми рмкрм╛рмгрнНрмарм┐ рммрмгрнНрмЯрми', action: 'allocateFunds' }
        ],
        services: [
            { icon: 'ЁЯСС', title: 'Apex Policy Control', titleOdia: 'рм╢рнАрм░рнНрм╖ рмирнАрмдрм┐ рмирм┐рнЯрмирнНрмдрнНрм░рмг', description: 'Set high-level policy guidelines and oversight for all districts' },
            { icon: 'ЁЯЪи', title: 'Disaster and Crisis Management', titleOdia: 'рммрм┐рмкрм░рнНрмпрнНрнЯрнЯ рмУ рм╕рмЩрнНрмХрмЯ рмкрм░рм┐рмЪрм╛рм│рмирм╛', description: 'Tools for emergency coordination and response for the entire division' },
            { icon: 'ЁЯУИ', title: 'Strategic Planning', titleOdia: 'рм░рмгрмирнАрмдрм┐рмХ рмпрнЛрмЬрмирм╛', description: 'Long-term planning and goal setting for educational excellence' }
        ]
    }
};

// Modal Content Templates
const modalContentTemplates = {
    viewAssignments: (roleConfig) => `
        <h4>Assignment List for ${roleConfig.nameEng}</h4>
        <p class="cultural-text">рм╕рморм╕рнНрмд рмХрм╛рм░рнНрмпрнНрнЯрм╕рнВрмЪрнА</p>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Subject</th>
                    <th>Topic</th>
                    <th>Due Date</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Mathematics</td>
                    <td>Trigonometry Worksheet</td>
                    <td>2024-10-10</td>
                    <td><span class="status-badge submitted">Submitted</span></td>
                </tr>
                <tr>
                    <td>Science</td>
                    <td>Chemical Reactions Lab Report</td>
                    <td>2024-10-15</td>
                    <td><span class="status-badge pending">Pending</span></td>
                </tr>
                <tr>
                    <td>Odia</td>
                    <td>Essay on Odia Culture</td>
                    <td>2024-10-25</td>
                    <td><span class="status-badge pending">Pending</span></td>
                </tr>
            </tbody>
        </table>
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="alert('Navigating to Assignment Submission...')">Submit New Assignment</button>
        </div>
    `,
    checkResults: (roleConfig) => `
        <h4>Latest Examination Results: Quarterly Test</h4>
        <p class="cultural-text">рмлрм│рм╛рмлрм│ рммрм┐рммрм░рмгрнА</p>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Subject</th>
                    <th>Marks Obtained</th>
                    <th>Max. Marks</th>
                    <th>Grade</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Mathematics</td>
                    <td>88</td>
                    <td>100</td>
                    <td><span class="status-badge completed">A+</span></td>
                </tr>
                <tr>
                    <td>Science</td>
                    <td>75</td>
                    <td>100</td>
                    <td><span class="status-badge completed">B+</span></td>
                </tr>
                <tr>
                    <td>Social Science</td>
                    <td>92</td>
                    <td>100</td>
                    <td><span class="status-badge completed">A+</span></td>
                </tr>
            </tbody>
        </table>
        <p class="mt-2">Overall Performance: **Excellent**</p>
    `,
    viewTimetable: (roleConfig) => `
        <h4>Class Time Table: 10-A</h4>
        <p class="cultural-text">рм╕рморнЯ рм╕рм╛рм░рмгрнА</p>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Monday</th>
                    <th>Tuesday</th>
                    <th>Wednesday</th>
                    <th>Thursday</th>
                    <th>Friday</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>9:00 - 10:00</td><td>Math</td><td>Science</td><td>Odia</td><td>English</td><td>Math</td></tr>
                <tr><td>10:00 - 11:00</td><td>Science</td><td>English</td><td>Social Sci</td><td>Math</td><td>Odia</td></tr>
                <tr><td>11:30 - 12:30</td><td>Social Sci</td><td>Math</td><td>Science</td><td>Odia</td><td>English</td></tr>
                <tr><td>12:30 - 1:30</td><td>English</td><td>Odia</td><td>Math</td><td>Science</td><td>Social Sci</td></tr>
            </tbody>
        </table>
    `,
    markAttendance: (roleConfig) => `
        <h4>Mark Attendance for Class 10-A Today</h4>
        <p class="cultural-text">рмЖрмЬрм┐рм░ рмЙрмкрм╕рнНрмерм╛рми</p>
        <form onsubmit="event.preventDefault(); alert('Attendance Submitted for 45 students.'); closeModal();">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Roll No.</th>
                        <th>Student Name</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Aarav Das</td>
                        <td>
                            <select class="form-select">
                                <option value="present">Present</option>
                                <option value="absent">Absent</option>
                                <option value="late">Late</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Bhavna Sahu</td>
                        <td>
                            <select class="form-select">
                                <option value="present" selected>Present</option>
                                <option value="absent">Absent</option>
                                <option value="late">Late</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>15</td>
                        <td>Ravi Kumar Patel</td>
                        <td>
                            <select class="form-select">
                                <option value="present" selected>Present</option>
                                <option value="absent">Absent</option>
                                <option value="late">Late</option>
                            </select>
                        </td>
                    </tr>
                    </tbody>
            </table>
            <div class="action-buttons">
                <button type="submit" class="btn btn-success">Submit Attendance</button>
            </div>
        </form>
    `,
    // Parent-specific
    payFees: (roleConfig) => `
        <h4>Fee Payment for Ravi Kumar Patel</h4>
        <p class="cultural-text">рмлрм┐рм╕рнН рмкрнИрма</p>
        <div style="background: var(--light-gray); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
            <p><strong>Due Amount:</strong> тВ╣5,000.00</p>
            <p><strong>Due Date:</strong> October 15, 2024</p>
            <p><strong>Last Payment:</strong> тВ╣8,000.00 (April 2024)</p>
        </div>
        <div class="form-group">
            <label class="form-label">Amount to Pay</label>
            <input type="number" class="form-input" value="5000" min="100" max="5000">
        </div>
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="alert('Payment of тВ╣5,000 initiated via UPI.'); closeModal();">Proceed to Payment Gateway</button>
        </div>
    `,
    // Headmaster-specific
    approveLeave: (roleConfig) => `
        <h4>Pending Leave Applications</h4>
        <p class="cultural-text">рмЫрнБрмЯрм┐ рмЖрммрнЗрмжрмирмЧрнБрмбрм┐рмХ</p>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Applicant</th>
                    <th>Role</th>
                    <th>Date Range</th>
                    <th>Reason</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Sushree Anjali Das</td>
                    <td>Teacher (10-A)</td>
                    <td>2024-10-25 to 2024-10-27 (3 days)</td>
                    <td>Family Function</td>
                    <td>
                        <button class="btn btn-success btn-sm" style="padding: 0.5rem 1rem;" onclick="alert('Leave Approved!'); closeModal();">Approve</button>
                    </td>
                </tr>
                <tr>
                    <td>Gita Sahu</td>
                    <td>Staff (Library)</td>
                    <td>2024-11-01 (1 day)</td>
                    <td>Medical Appointment</td>
                    <td>
                        <button class="btn btn-success btn-sm" style="padding: 0.5rem 1rem;" onclick="alert('Leave Approved!'); closeModal();">Approve</button>
                    </td>
                </tr>
            </tbody>
        </table>
    `,
    // District Officer-specific
    approveTransfer: (roleConfig) => `
        <h4>Pending Teacher Transfer Requests</h4>
        <p class="cultural-text">рм╢рм┐рмХрнНрм╖рмХ рм╕рнНрмерм╛рмирм╛рмирнНрмдрм░ рмЕрмирнБрморнЛрмжрми</p>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Teacher ID</th>
                    <th>Name</th>
                    <th>From School</th>
                    <th>To School</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>TCH2015050</td>
                    <td>Kumar Patra</td>
                    <td>Block A High School</td>
                    <td>Block B Secondary</td>
                    <td>
                        <button class="btn btn-success btn-sm" style="padding: 0.5rem 1rem;" onclick="alert('Transfer Approved!'); closeModal();">Approve</button>
                    </td>
                </tr>
                <tr>
                    <td>TCH2020112</td>
                    <td>Priya Senapati</td>
                    <td>Kalinga Inst. Tech.</td>
                    <td>City Central School</td>
                    <td>
                        <button class="btn btn-success btn-sm" style="padding: 0.5rem 1rem;" onclick="alert('Transfer Approved!'); closeModal();">Approve</button>
                    </td>
                </tr>
            </tbody>
        </table>
    `,
    // Generic fallback
    default: (roleConfig, actionName) => `
        <h4>Feature in Development</h4>
        <p class="cultural-text">рмПрм╣рм┐ рммрнИрм╢рм┐рм╖рнНрмЯрнНрнЯ рммрм┐рмХрм╛рм╢рм╛рмзрнАрми</p>
        <p>The action **'${actionName}'** is not yet fully implemented for the **${roleConfig.roleBadge}** role.</p>
        <p>Thank you for your patience as we enhance the Odisha Education Portal.</p>
    `
};


// Utility Functions
function getRoleConfig(role) {
    return roleConfigs[role] || roleConfigs['student']; // Default to student if role is unknown
}

// Dashboard Rendering Functions
function renderStats(roleConfig) {
    statsGrid.innerHTML = roleConfig.stats.map(stat => `
        <div class="stat-card">
            <div class="stat-icon">${stat.icon}</div>
            <div class="stat-value">${stat.value}</div>
            <div class="stat-label">${stat.label}</div>
            <div class="stat-change ${stat.type}">${stat.change}</div>
        </div>
    `).join('');
}

function renderQuickActions(roleConfig) {
    quickActions.innerHTML = roleConfig.quickActions.map(action => `
        <a href="#" class="action-btn" data-action="${action.action}" onclick="openModal('${action.action}')">
            <div class="action-icon">${action.icon}</div>
            <div class="action-text">${action.text}</div>
            <div class="action-text-odia">${action.textOdia}</div>
        </a>
    `).join('');
}

function renderServices(roleConfig) {
    servicesGrid.innerHTML = roleConfig.services.map(service => `
        <div class="service-card">
            <div class="service-header">
                <div class="service-icon">${service.icon}</div>
                <div class="service-title">${service.title}</div>
                <div class="service-title-odia">${service.titleOdia}</div>
            </div>
            <div class="service-body">
                <p class="service-description">${service.description}</p>
                <a href="#" class="btn btn-primary" style="padding: 0.75rem 1.5rem; font-size: 0.9rem;" onclick="alert('${service.title} service activated!')">Access Service</a>
            </div>
        </div>
    `).join('');
}

function populateDashboard(role) {
    currentRole = role;
    const config = getRoleConfig(role);

    // Update Header Info
    userName.textContent = config.nameEng;
    userRole.textContent = config.roleBadge;
    userId.textContent = `ID: ${config.userID}`;
    userAvatar.textContent = config.nameEng.charAt(0); // First letter of English name
    dashboardPage.className = `page dashboard-page active ${role}`;

    // Update Dashboard Title
    dashboardTitle.textContent = config.title;
    dashboardSubtitle.textContent = config.subtitle;
    dashboardOdiaText.textContent = config.titleOdia;
    roleBadge.textContent = config.roleBadge;

    // Render Dynamic Sections
    renderStats(config);
    renderQuickActions(config);
    renderServices(config);

    // Hide loading screen and switch to dashboard
    loginPage.classList.remove('active');
    dashboardPage.classList.add('active');
}

// Event Handlers

function initialize() {
    // Hide loading screen after 1.5 seconds
    setTimeout(() => {
        loadingScreen.classList.add('hidden');
        // Ensure login page is visible initially
        loginPage.classList.add('active');
    }, 1500);

    // Setup Role Selection
    document.querySelectorAll('.role-card').forEach(card => {
        card.addEventListener('click', function() {
            document.querySelectorAll('.role-card').forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
            selectedRole = this.getAttribute('data-role');
            loginForm.classList.add('show');

            // Pre-fill credentials for demo
            const config = roleConfigs[selectedRole];
            document.getElementById('email').value = config.credentials.email;
            document.getElementById('password').value = config.credentials.password;
        });
    });
}

function handleLogin(event) {
    event.preventDefault();

    if (!selectedRole) {
        alert('Please select a role first!');
        return;
    }

    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const config = roleConfigs[selectedRole];

    // Simple client-side validation using sample data
    if (email === config.credentials.email && password === config.credentials.password) {
        populateDashboard(selectedRole);
    } else {
        alert('Login Failed! Check the sample credentials provided above.');
    }
}

function openModal(actionName) {
    const config = getRoleConfig(currentRole);
    const contentGenerator = modalContentTemplates[actionName] || modalContentTemplates['default'];

    modalTitle.textContent = actionName.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
    modalTitleOdia.textContent = config.quickActions.find(a => a.action === actionName)?.textOdia || 'рмХрм╛рм░рнНрмпрнНрнЯ';
    modalBody.innerHTML = contentGenerator(config, actionName);
    
    modalOverlay.classList.add('show');
}

function closeModal() {
    modalOverlay.classList.remove('show');
}

function logout() {
    currentRole = null;
    selectedRole = null;
    
    // Clear form
    document.getElementById('email').value = '';
    document.getElementById('password').value = '';
    loginForm.classList.remove('show');
    
    // Remove role selection
    document.querySelectorAll('.role-card').forEach(card => {
        card.classList.remove('selected');
    });

    // Reset dashboard page class
    dashboardPage.className = 'page';

    // Switch pages
    dashboardPage.classList.remove('active');
    loginPage.classList.add('active');
}

// Initialize the application when the DOM is ready
document.addEventListener('DOMContentLoaded', initialize);

// Event Listeners
document.addEventListener('click', function(e) {
    if (e.target === modalOverlay) {
        closeModal();
    }
});

// Add interactive sound effects (optional)
document.addEventListener('click', function(e) {
    if (e.target.closest('.action-btn') || e.target.closest('.role-card')) {
        // Could add a subtle click sound here
        e.target.style.transform = 'scale(0.98)';
        setTimeout(() => {
            if (e.target) e.target.style.transform = '';
        }, 100);
    }
});
